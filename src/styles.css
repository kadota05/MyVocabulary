:root{
  --bg:#0f172a; --fg:#e2e8f0; --muted:#94a3b8; --accent:#22c55e; --danger:#ef4444; --primary:#38bdf8; --footer-height:64px;
}
.sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
.no-scrollbar::-webkit-scrollbar{ display:none; }
.no-scrollbar{ -ms-overflow-style:none; scrollbar-width:none; }
.calendar-add-screen{ background:#211111; color:#f8fafc; display:flex; flex-direction:column; min-height:100vh; padding:calc(env(safe-area-inset-top, 0px)) 0 calc(var(--footer-height) + env(safe-area-inset-bottom, 0px)); gap:18px; }
.calendar-add-header{ position:sticky; top:calc(env(safe-area-inset-top, 0px)); z-index:20; display:flex; align-items:center; justify-content:space-between; gap:12px; padding:16px clamp(20px, 6vw, 36px); background:#1c1c1e; border-bottom:1px solid #38383a; box-shadow:0 8px 24px rgba(0,0,0,.45); }
.calendar-add-header__title{ font-size:18px; font-weight:700; letter-spacing:-0.01em; margin:0; }
.calendar-add-header__link{ font-size:16px; font-weight:600; letter-spacing:-0.01em; background:none; border:none; padding:6px 0; color:#f8f6f6; cursor:pointer; }
.calendar-add-header__link.is-cancel{ color:#ea2831; font-weight:500; }
.calendar-add-header__link.is-primary{ color:#ea2831; font-weight:700; opacity:1; transition:opacity .2s ease; }
.calendar-add-header__link[disabled], .calendar-add-header__link[aria-disabled='true']{ opacity:.35; cursor:not-allowed; }
.calendar-add-tabs{ display:flex; align-items:center; gap:8px; background:#1c1c1e; border-radius:18px; border:1px solid #38383a; padding:6px; width:calc(100% - clamp(32px, 12vw, 84px)); margin:0 auto 18px auto; box-shadow:0 18px 44px rgba(0,0,0,.45); }
.calendar-add-tab{ flex:1; border:none; border-radius:14px; padding:10px 14px; font-size:14px; font-weight:600; color:#8e8e93; background:transparent; transition:background .2s ease, color .2s ease, box-shadow .2s ease; cursor:pointer; }
.calendar-add-tab.is-active{ background:#38383a; color:#ffffff; box-shadow:0 12px 30px rgba(0,0,0,.4); }
.calendar-add-body{ flex:1; min-height:0; overflow:auto; padding:0 clamp(14px, 5vw, 32px) 44px; display:flex; flex-direction:column; gap:18px; scrollbar-width:none; -ms-overflow-style:none; }
.calendar-add-body::-webkit-scrollbar{ width:0; height:0; }
.calendar-add-card{ background:#1c1c1e; border-radius:22px; border:1px solid #38383a; padding:22px; display:flex; flex-direction:column; gap:18px; box-shadow:0 20px 48px rgba(0,0,0,.55); width:100%; box-sizing:border-box; }
.calendar-add-card--input{ padding:0; gap:0; overflow:hidden; }
.calendar-add-card--input label{ display:block; width:100%; overflow:hidden; }
.calendar-add-card--input .calendar-add-field{ padding:0; gap:0; }
.calendar-add-card--input .calendar-add-input,
.calendar-add-card--input .calendar-add-textarea{ background:transparent; border:none; border-radius:0; padding:18px 20px; font-size:16px; word-break:break-word; overflow-wrap:break-word; width:100%; box-sizing:border-box; }
.calendar-add-card--input .calendar-add-input{ border-bottom:1px solid rgba(56,56,58,.65); }
.calendar-add-card--input .calendar-add-textarea{ min-height:96px; resize:none; }
.calendar-add-field{ display:flex; flex-direction:column; gap:10px; }
.calendar-add-field__label{ font-size:13px; letter-spacing:0.12em; text-transform:uppercase; color:#94a3b8; }
.calendar-add-input,.calendar-add-textarea{ background:rgba(28,28,30,.85); border-radius:18px; border:1px solid rgba(56,56,58,.75); color:#f8fafc; padding:14px 16px; font-size:16px; font-family:inherit; resize:none; transition:border-color .2s ease, background .2s ease; word-break:break-word; overflow-wrap:break-word; }
.calendar-add-input:focus,.calendar-add-textarea:focus{ outline:none; border-color:#ea2831; background:rgba(28,28,30,.95); box-shadow:0 0 0 3px rgba(234,40,49,.28); }
.calendar-add-color-row{ display:flex; align-items:center; justify-content:flex-start; gap:14px; padding:2px 20px 0; }
.calendar-add-color-chip{ appearance:none; width:32px; height:32px; border-radius:50%; border:2px solid rgba(148,163,184,.35); background-clip:padding-box; cursor:pointer; transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease; }
.calendar-add-color-chip:hover{ transform:scale(1.08); border-color:rgba(226,232,240,.5); }
.calendar-add-color-chip:focus-visible{ outline:2px solid rgba(226,232,240,.5); outline-offset:4px; }
.calendar-add-color-chip.is-selected{ border-color:rgba(226,232,240,.7); box-shadow:0 0 0 3px rgba(226,232,240,.7); transform:scale(1.05); }
.calendar-add-card--input .calendar-add-input:focus,
.calendar-add-card--input .calendar-add-textarea:focus{ background:rgba(255,255,255,.04); box-shadow:none; border-color:rgba(234,40,49,.45); }
.calendar-add-card--schedule{ padding:12px 12px 6px; gap:6px; overflow:hidden; display:flex; flex-direction:column; }
.calendar-add-schedule-group{ display:flex; flex-direction:column; gap:6px; }
.calendar-add-schedule-row{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:4px 18px; border-bottom:1px solid rgba(56,56,58,.6); transition:background .2s ease; flex-wrap:nowrap; }
.calendar-add-schedule-row:last-child{ border-bottom:none; }
.calendar-add-schedule-row.is-active{ background:rgba(234,40,49,.12); }
.calendar-add-schedule-row.has-error{ background:rgba(127,29,29,.18); }
.calendar-add-schedule-label{ font-size:15px; font-weight:600; color:#ffffff; min-width:52px; }
.calendar-add-schedule-chips{ display:flex; gap:10px; justify-content:flex-end; margin-left:auto; flex-wrap:nowrap; }
.calendar-add-picker-chip{ display:flex; align-items:center; justify-content:center; gap:10px; border-radius:10px; padding:8px 16px; font-size:15px; font-weight:600; border:1px solid rgba(56,56,58,.85); background:rgba(40,40,44,.85); color:#f8fafc; min-width:126px; cursor:pointer; transition:background .2s ease, border-color .2s ease, color .2s ease, transform .2s ease; }
.calendar-add-picker-chip.is-neutral{ background:rgba(56,56,58,.65); border-color:rgba(72,72,76,.72); color:#f8fafc; }
.calendar-add-picker-chip.is-accent{ background:rgba(234,40,49,.16); border-color:rgba(234,40,49,.6); color:#ea2831; }
.calendar-add-picker-chip.is-invalid{ border-color:rgba(234,40,49,.8); color:#fef2f2; }
.calendar-add-picker-chip:focus-visible{ outline:none; border-color:#ea2831; box-shadow:0 0 0 3px rgba(234,40,49,.28); }
.calendar-add-picker-chip:active{ transform:scale(.97); }
.calendar-add-error{ margin:0 18px 6px; font-size:13px; color:#fca5a5; background:rgba(120,16,24,.25); padding:10px 14px; border-radius:14px; border:1px solid rgba(234,40,49,.45); }\r\n.calendar-add-card--schedule .calendar-add-error{ margin-top:0; }\r\n.calendar-add-wheel{ position:relative; height:192px; margin:12px 14px 20px; border-radius:20px; background:rgba(32,32,34,.9); border:1px solid rgba(56,56,58,.65); display:flex; align-items:center; justify-content:center; overflow:hidden; box-shadow:inset 0 20px 32px rgba(0,0,0,.35); }\r\n.calendar-add-wheel__mask{ position:absolute; inset-inline:18px; height:48px; top:50%; transform:translateY(-50%); background:rgba(72,72,76,.35); border-radius:14px; border:1px solid rgba(148,163,184,.24); pointer-events:none; }\r\n.calendar-add-wheel__columns{ display:flex; align-items:center; justify-content:center; gap:12px; width:100%; padding:0 22px; position:relative; z-index:1; }\r\n.calendar-add-wheel__column{ display:flex; flex-direction:column; align-items:center; gap:10px; color:#8e8e93; font-size:15px; font-weight:500; }\r\n.calendar-add-wheel__column.is-date{ min-width:132px; }\r\n.calendar-add-wheel__column.is-hour,\r\n.calendar-add-wheel__column.is-minute{ min-width:72px; }\r\n.calendar-add-wheel__item{ height:34px; display:flex; align-items:center; justify-content:center; width:100%; border-radius:10px; }\r\n.calendar-add-wheel__item.is-active{ color:#ffffff; font-size:20px; font-weight:600; }\r\n.calendar-add-wheel__separator{ color:#ffffff; font-size:18px; font-weight:600; padding-bottom:4px; }\r\n.calendar-template-list{ display:flex; flex-direction:column; gap:12px; }
.calendar-template-card{ display:flex; align-items:center; justify-content:space-between; gap:12px; background:rgba(10,15,28,.92); border-radius:22px; padding:18px 20px; border:1px solid rgba(51,65,85,.55); color:#f8fafc; text-align:left; cursor:pointer; transition:border-color .2s ease, transform .2s ease; }
.calendar-template-card:active{ transform:scale(.98); }
.calendar-template-card:focus-visible{ outline:none; border-color:#ef4444; box-shadow:0 0 0 3px rgba(239,68,68,.28); }
.calendar-template-card__text{ display:flex; flex-direction:column; gap:8px; }
.calendar-template-card__title{ font-size:17px; font-weight:600; }
.calendar-template-card__summary{ font-size:14px; color:#cbd5f5; }
.calendar-template-list__add{ margin-top:8px; display:flex; align-items:center; justify-content:center; gap:10px; border-radius:20px; border:1px dashed rgba(239,68,68,.6); background:rgba(15,23,42,.6); color:#f87171; padding:14px 18px; font-weight:600; cursor:pointer; }
.calendar-template-list__add:focus-visible{ outline:none; border-style:solid; box-shadow:0 0 0 3px rgba(239,68,68,.28); }
.calendar-template-detail{ display:flex; flex-direction:column; gap:18px; background:rgba(10,15,28,.92); border-radius:26px; padding:22px; border:1px solid rgba(51,65,85,.65); box-shadow:0 28px 60px rgba(2,6,23,.6); min-height:0; }
.calendar-template-detail__back{ display:inline-flex; align-items:center; gap:6px; border:none; background:none; color:#f87171; font-weight:600; letter-spacing:0.06em; cursor:pointer; padding:4px 0; }
.calendar-template-detail__title{ font-size:20px; font-weight:700; margin:0; }
.calendar-template-detail__list{ display:flex; flex-direction:column; gap:16px; }
.calendar-template-activity{ display:flex; gap:16px; background:rgba(15,23,42,.72); border-radius:22px; border:1px solid rgba(71,85,105,.6); padding:16px; transition:opacity .2s ease, border-color .2s ease; }
.calendar-template-activity.is-disabled{ opacity:.45; border-color:rgba(71,85,105,.35); }
.calendar-template-activity__time{ display:flex; align-items:flex-start; }
.calendar-template-activity__time-button{ display:flex; align-items:center; gap:6px; border:none; background:rgba(10,15,28,.88); border-radius:18px; padding:12px 14px; font-size:16px; color:#f8fafc; cursor:pointer; transition:background .2s ease, transform .2s ease; }
.calendar-template-activity__time-button:active{ transform:scale(.97); }
.calendar-template-activity__time-button:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(239,68,68,.28); background:rgba(10,15,28,.95); }
.calendar-template-activity__body{ flex:1; display:flex; flex-direction:column; gap:12px; }
.calendar-template-activity__row{ display:flex; align-items:center; gap:12px; }
.calendar-template-activity__name{ flex:1; display:flex; }
.calendar-template-activity__name input{ flex:1; background:transparent; border:none; color:#f8fafc; font-size:16px; font-weight:600; padding:6px 0; border-bottom:1px solid rgba(148,163,184,.2); transition:border-color .2s ease; }
.calendar-template-activity__name input:focus{ outline:none; border-color:#ef4444; }
.calendar-template-activity__toggle{ border:none; background:none; color:#f87171; display:flex; align-items:center; justify-content:center; cursor:pointer; }
.calendar-template-activity__note textarea{ width:100%; background:rgba(10,15,28,.88); border-radius:16px; border:1px solid rgba(71,85,105,.6); padding:12px 14px; font-size:14px; color:#e2e8f0; resize:none; }
.calendar-template-activity__note textarea:focus{ outline:none; border-color:#ef4444; box-shadow:0 0 0 3px rgba(239,68,68,.28); }
.calendar-template-activity__meta{ font-size:12px; color:#94a3b8; margin:0; }
.calendar-template-detail__add-activity{ display:inline-flex; align-items:center; gap:8px; background:none; border:none; color:#f87171; cursor:pointer; font-weight:600; letter-spacing:0.06em; }
.calendar-template-detail__cta{ margin-top:auto; background:#ef4444; border:none; border-radius:24px; padding:16px; color:#fff; font-size:17px; font-weight:700; letter-spacing:0.06em; cursor:pointer; transition:transform .2s ease, background .2s ease; }
.calendar-template-detail__cta:active{ transform:scale(.97); }
.calendar-template-detail__cta[disabled], .calendar-template-detail__cta[aria-disabled='true']{ opacity:.45; cursor:not-allowed; }
.picker-overlay{ position:fixed; inset:0; background:rgba(3,6,15,.65); display:flex; align-items:flex-end; justify-content:center; padding:0 0 env(safe-area-inset-bottom, 0px); z-index:200; }
.picker-sheet{ width:100%; max-width:520px; background:#0b1220; border-radius:26px 26px 0 0; border:1px solid rgba(71,85,105,.55); box-shadow:0 -12px 40px rgba(2,6,23,.65); padding:18px 18px 28px; display:flex; flex-direction:column; gap:18px; }
.picker-sheet__header{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
.picker-sheet__title{ font-size:16px; font-weight:600; letter-spacing:0.08em; color:#e2e8f0; }
.picker-sheet__action{ border:none; background:none; color:#cbd5f5; font-weight:600; cursor:pointer; padding:4px 0; }
.picker-sheet__action.is-primary{ color:#f87171; }
.picker-sheet__body{ display:flex; align-items:flex-start; justify-content:center; gap:18px; padding:0 12px; position:relative; }
.picker-sheet__body::before,.picker-sheet__body::after{ content:''; position:absolute; left:12px; right:12px; height:36px; border-radius:12px; pointer-events:none; }
.picker-sheet__body::before{ top:0; background:linear-gradient(180deg, rgba(11,18,32,1) 0%, rgba(11,18,32,0) 100%); }
.picker-sheet__body::after{ bottom:0; background:linear-gradient(0deg, rgba(11,18,32,1) 0%, rgba(11,18,32,0) 100%); }
.picker-wheel{ display:flex; flex-direction:column; align-items:center; gap:12px; flex:1; min-width:0; }
.picker-wheel__label{ font-size:12px; letter-spacing:0.12em; text-transform:uppercase; color:#94a3b8; }
.picker-wheel__list{ width:100%; max-height:180px; overflow-y:auto; scrollbar-width:none; -ms-overflow-style:none; display:flex; flex-direction:column; gap:6px; padding:0 4px; }
.picker-wheel__list::-webkit-scrollbar{ width:0; height:0; }
.picker-wheel__item{ border:none; background:rgba(15,23,42,.65); color:#f8fafc; border-radius:14px; padding:10px 12px; font-size:18px; cursor:pointer; transition:background .2s ease, transform .2s ease; }
.picker-wheel__item:active{ transform:scale(.96); }
.picker-wheel__item.is-selected{ background:#1f2937; box-shadow:0 18px 34px rgba(8,14,34,.55); }
.app{min-height:100%;}
.container{max-width:640px; margin:0 auto; padding:calc(16px + env(safe-area-inset-top, 0px)) 16px calc(24px + env(safe-area-inset-bottom, 0px));}
.card{background:#111827; border:1px solid #1f2937; border-radius:12px; padding:16px;}
.title{font-size:20px; font-weight:700; margin:0 0 8px;}
.row{display:flex; gap:12px;}
.col{display:flex; flex-direction:column; gap:8px;}
.home-layout{ gap:12px; min-height:calc(100vh - env(safe-area-inset-top, 0px) - env(safe-area-inset-bottom, 0px)); justify-content:space-between; }
@supports (height:100svh){
  .home-layout{ min-height:calc(100svh - env(safe-area-inset-top, 0px) - env(safe-area-inset-bottom, 0px)); }
}
@supports (height:100dvh){
  .home-layout{ min-height:calc(100dvh - env(safe-area-inset-top, 0px) - env(safe-area-inset-bottom, 0px)); }
}
.home-screen{ --header-height:72px; position:relative; display:flex; flex-direction:column; min-height:100vh; width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw); margin-top:calc(-1 * (16px + env(safe-area-inset-top, 0px))); padding:calc(var(--header-height) + 16px) clamp(24px, 7vw, 128px) calc(var(--footer-height) + 40px + env(safe-area-inset-bottom, 0px)); box-sizing:border-box; background:var(--bg); }
.home-body{ flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:24px; min-height:calc(100vh - var(--header-height) - var(--footer-height)); }
.home-header{ position:fixed; top:0; left:0; right:0; height:var(--header-height); display:flex; align-items:center; justify-content:space-between; padding:calc(12px + env(safe-area-inset-top, 0px)) clamp(24px, 7vw, 128px) 12px; background:rgba(15,23,42,.9); backdrop-filter:blur(18px); border-bottom:1px solid #1f2937; z-index:40; }
.home-header__brand{ font-size:18px; font-weight:700; letter-spacing:0.14em; text-transform:uppercase; color:var(--fg); }
.home-header__actions{ display:flex; align-items:center; gap:12px; }
.page-screen{ --header-height:72px; position:relative; display:flex; flex-direction:column; min-height:100vh; width:100vw; margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw); margin-top:calc(-1 * (16px + env(safe-area-inset-top, 0px))); padding:calc(var(--header-height) + 24px) clamp(24px, 7vw, 128px) calc(var(--footer-height) + 32px + env(safe-area-inset-bottom, 0px)); box-sizing:border-box; background:var(--bg); }
.page-body{ flex:1; width:100%; max-width:640px; margin:0 auto; display:flex; flex-direction:column; gap:20px; }
.footer-nav{ position:fixed; left:0; right:0; bottom:0; display:flex; align-items:flex-end; justify-content:center; gap:6px; padding:10px clamp(24px, 10vw, 160px) calc(6px + env(safe-area-inset-bottom, 0px)); background:rgba(11,16,30,.92); backdrop-filter:blur(18px); border-top:1px solid #1f2937; z-index:100; transition:filter .25s ease; }
.footer-nav.is-dimmed{ filter:brightness(.45) saturate(.65); }
.footer-nav__item{ flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:6px; color:var(--muted); text-decoration:none; letter-spacing:0.08em; font-size:11px; text-transform:uppercase; transition:color .2s ease; }
.footer-nav__item--active{ color:var(--fg); }
.footer-nav__icon{ width:40px; height:40px; border-radius:12px; border:1px solid rgba(51,65,85,.7); background:rgba(15,23,42,.9); display:flex; align-items:center; justify-content:center; transition:border-color .2s ease, transform .2s ease, background .2s ease; }
.footer-nav__item--active .footer-nav__icon{ border-color:var(--primary); background:rgba(38,132,255,.12); transform:translateY(-4px); }
.footer-nav__label{ font-weight:600; letter-spacing:0.14em; font-size:9px; }
.footer-nav__item:focus-visible .footer-nav__icon{ outline:2px solid rgba(56,189,248,.75); outline-offset:4px; }
.icon-button{ appearance:none; width:48px; height:48px; border-radius:9999px; border:1px solid rgba(51,65,85,.6); background:rgba(17,24,39,.85); color:var(--fg); display:flex; align-items:center; justify-content:center; cursor:pointer; transition:background .18s ease, border-color .18s ease, transform .18s ease; }
.icon-button:hover{ background:rgba(30,41,59,.95); border-color:#334155; }
.icon-button:active{ transform:scale(0.95); }
.icon-button.card-order-toggle{ width:auto; min-width:48px; padding:0 14px; font-size:12px; font-weight:600; letter-spacing:0.08em; }
.card-order-toggle__text{ display:block; line-height:1.1; text-align:center; }
.home-settings{ max-width:min(520px,100%); margin:0 auto; gap:12px; backdrop-filter:blur(8px); }
.settings-title{ font-weight:700; font-size:16px; color:var(--fg); }
.circle-hero{ flex:1; display:flex; align-items:center; justify-content:center; padding:clamp(8px, 4vh, 32px) 0; width:100%; }
.home-note{ max-width:420px; margin:0 auto; text-align:center; line-height:1.6; }
.import-progress{ position:fixed; inset:0; background:rgba(0,0,0,.55); display:flex; align-items:center; justify-content:center; padding:24px; z-index:80; }
.modal-overlay{ position:fixed; inset:0; background:rgba(2,6,23,.68); backdrop-filter:blur(12px); display:flex; align-items:center; justify-content:center; padding:24px; z-index:140; }
.modal-surface{ width:min(520px, calc(100% - 32px)); max-height:calc(100vh - 24px - (var(--footer-height) + env(safe-area-inset-bottom, 0px))); background:#0f172a; border:1px solid rgba(51,65,85,.6); border-radius:18px; box-shadow:0 28px 64px rgba(2,6,23,.55); display:flex; flex-direction:column; gap:0; overflow:hidden; }
.modal-header{ display:flex; align-items:center; justify-content:space-between; padding:20px 24px 16px; border-bottom:1px solid rgba(51,65,85,.5); flex-shrink:0; }
.modal-title{ font-weight:700; font-size:18px; letter-spacing:0.04em; color:var(--fg); }
.modal-close{ appearance:none; width:40px; height:40px; border-radius:12px; border:1px solid rgba(51,65,85,.6); background:rgba(17,24,39,.9); color:var(--fg); font-size:22px; line-height:1; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:background .18s ease, transform .18s ease; }
.modal-close:hover{ background:rgba(30,41,59,.95); }
.modal-close:active{ transform:scale(0.92); }
.modal-body{ padding:20px 24px 24px; display:flex; flex-direction:column; gap:14px; align-items:stretch; flex:1; overflow:auto; }
.modal-body > .col,
.modal-body > form{ width:100%; }
.modal-actions{ display:flex; justify-content:flex-end; gap:12px; margin-top:8px; }
.csv-import-layout{ display:flex; flex-direction:column; gap:12px; width:100%; }
.csv-import-layout.has-preview{ height:min(70vh, 560px); }
.csv-import-hint{ font-size:14px; line-height:1.5; color:var(--muted); }
.csv-import-input{ width:100%; padding:10px 14px; border-radius:14px; border:1px dashed rgba(51,65,85,.8); background:rgba(15,23,42,.94); color:var(--fg); font-size:14px; cursor:pointer; box-sizing:border-box; max-width:100%; }
.csv-import-input:disabled{ opacity:.7; cursor:not-allowed; }
.csv-import-input::file-selector-button{ margin-right:12px; padding:8px 16px; border:none; border-radius:10px; background:var(--accent); color:#022c22; font-weight:600; cursor:pointer; }
.csv-import-input--hidden{ display:none; }
.csv-import-summary{ display:flex; align-items:center; justify-content:space-between; gap:16px; padding:6px 12px; border:1px solid rgba(51,65,85,.6); border-radius:12px; background:rgba(15,23,42,.9); font-size:13px; color:var(--muted); }
.csv-import-meta{ font-size:13px; color:var(--muted); }
.csv-reupload-button{ appearance:none; border:1px solid rgba(34,197,94,.4); background:rgba(15,23,42,.85); color:var(--accent); padding:6px 16px; border-radius:9999px; font-size:13px; font-weight:600; cursor:pointer; transition:background .18s ease, border-color .18s ease; }
.csv-reupload-button:hover{ border-color:rgba(34,197,94,.8); }
.csv-reupload-button:disabled{ opacity:.5; cursor:not-allowed; }
.csv-preview-panel{ flex:1; min-height:220px; }
.csv-preview{ height:100%; min-height:200px; overflow:auto; border:1px solid rgba(51,65,85,.7); border-radius:16px; padding:12px; background:rgba(2,6,23,.5); display:flex; flex-direction:column; gap:10px; }
.csv-preview__empty{ text-align:center; color:var(--muted); font-size:14px; padding:24px 12px; }
.csv-preview__row{ border:1px solid rgba(51,65,85,.7); border-radius:12px; padding:10px 12px; background:rgba(15,23,42,.9); display:flex; flex-direction:column; gap:4px; }
.csv-preview__phrase{ font-size:16px; font-weight:600; color:var(--fg); letter-spacing:0.04em; }
.csv-preview__meaning{ font-size:14px; font-weight:600; color:#4ade80; }
.csv-preview__tips,
.csv-preview__source{ font-size:13px; color:var(--muted); display:flex; align-items:flex-start; gap:6px; }
.csv-preview__more{ text-align:center; font-size:12px; color:var(--muted); }
.csv-import-actions{ position:relative; z-index:1; background:#0f172a; padding-top:4px; margin-top:auto; }
.csv-import-actions .btn{ min-width:120px; }
.csv-import-layout.has-preview .csv-preview-panel{ flex:1; }
.csv-import-layout.has-preview .csv-preview{ max-height:none; }
.csv-preview__icon{ width:16px; height:16px; color:var(--muted); flex-shrink:0; }
@media (max-width:640px){
  .csv-import-summary{ flex-direction:column; align-items:flex-start; gap:8px; }
  .csv-import-layout.has-preview{ height:min(70vh, 520px); }
}
.fab-overlay{ position:fixed; inset:0; background:rgba(8,15,28,.55); backdrop-filter:blur(2px); z-index:45; }
.fab-container{ position:fixed; right:clamp(20px, 6vw, 54px); bottom:calc(var(--footer-height) + clamp(20px, 6vh, 72px)); display:flex; flex-direction:column; align-items:flex-end; gap:12px; z-index:50; pointer-events:none; }
.fab-container.open{ pointer-events:auto; }
.fab-container .fab-toggle{ pointer-events:auto; }
.fab-menu{ display:flex; flex-direction:column; gap:10px; align-items:flex-end; opacity:0; pointer-events:none; transform:translateY(12px); transition:opacity .18s ease, transform .18s ease; }
.fab-container.open .fab-menu{ opacity:1; pointer-events:auto; transform:translateY(0); }
.fab-item{ appearance:none; border-radius:18px; border:1px solid rgba(51,65,85,.9); background:rgba(15,23,42,.96); color:var(--fg); padding:18px 28px; font-weight:600; font-size:18px; min-width:220px; text-align:center; cursor:pointer; box-shadow:0 22px 44px rgba(2,6,23,.42); transition:background .18s ease, transform .18s ease, box-shadow .18s ease; letter-spacing:0.04em; }
.fab-item:hover{ background:rgba(30,41,59,.97); transform:translateY(-1px); box-shadow:0 20px 36px rgba(2,6,23,.4); }
.fab-item:active{ transform:translateY(1px); box-shadow:0 10px 24px rgba(2,6,23,.35); }
.fab-item:disabled{ opacity:.6; cursor:progress; transform:none; box-shadow:0 12px 28px rgba(2,6,23,.3); }
.fab-toggle{ appearance:none; width:64px; height:64px; border-radius:9999px; border:none; background:var(--accent); color:#022c22; font-size:36px; font-weight:400; display:flex; align-items:center; justify-content:center; cursor:pointer; box-shadow:0 24px 48px rgba(34,197,94,.45); transition:transform .2s ease, box-shadow .2s ease; }
.fab-container.open .fab-toggle{ transform:rotate(45deg); box-shadow:0 16px 32px rgba(34,197,94,.4); }
.words-screen{ padding-bottom:calc(120px + env(safe-area-inset-bottom, 0px)); }
.words-toolbar{ position:sticky; top:calc(var(--header-height) + 12px + env(safe-area-inset-top, 0px)); display:flex; flex-direction:column; gap:10px; padding:16px; background:rgba(15,23,42,.92); border:1px solid #1f2937; border-radius:14px; box-shadow:0 16px 32px rgba(2,6,23,.45); backdrop-filter:blur(12px); z-index:30; }
.words-header__search{ display:flex; flex-direction:column; gap:6px; }
.words-header__search .input{ width:100%; }
.words-header__metrics{ font-size:14px; color:var(--muted); letter-spacing:0.02em; }
.words-main{ flex:1; display:flex; flex-direction:column; gap:12px; min-height:0; width:100%; max-width:640px; margin:0 auto; padding-top:12px; }
.words-list{ display:flex; flex-direction:column; gap:8px; }
.grow{flex:1}
.btn{appearance:none; border:1px solid #334155; background:#0b1220; color:var(--fg); padding:12px 16px; border-radius:10px; font-weight:600;}
.btn:active{transform:scale(0.98)}
.btn-primary{border-color:#155e75; background:#0b3a4b}
.btn-accent{border-color:#14532d; background:#0b2b16}
.btn-danger{border-color:#7f1d1d; background:#2a0b0b}
.hero-stack{ --circle-size:clamp(260px, min(70vw, 52vh), 520px); position:relative; width:var(--circle-size); height:calc(var(--circle-size) * 1.9); display:flex; align-items:center; justify-content:center; margin:0 auto; }
.hero-orb{ position:absolute; width:var(--circle-size); height:var(--circle-size); border-radius:50%; display:flex; align-items:center; justify-content:center; left:50%; transform:translate(-50%,0); }
.hero-orb--top{ top:calc(-0.47 * var(--circle-size)); background:#0e5d6c; box-shadow:0 26px 60px rgba(0,0,0,.45); z-index:0; pointer-events:none; }
.hero-orb--bottom{ bottom:calc(-0.47 * var(--circle-size)); background:#b97711; box-shadow:0 -18px 60px rgba(0,0,0,.35); z-index:0; pointer-events:none; }
.hero-orb--main{ position:absolute; top:50%; transform:translate(-50%,-50%); width:calc(var(--circle-size) * 0.98); height:calc(var(--circle-size) * 0.98); background:#c9d1c2; border:5px solid #d6a258; box-shadow:0 24px 64px rgba(2,6,23,.55); transition:transform .25s ease, box-shadow .25s ease; z-index:5; overflow:hidden; text-decoration:none; cursor:pointer; appearance:none; padding:0; color:#ffffff; touch-action:manipulation; pointer-events:auto; }
.hero-stack:hover .hero-orb--main{ transform:translate(-50%,-51%); box-shadow:0 34px 80px rgba(2,6,23,.6); }
.hero-stack:active .hero-orb--main{ transform:translate(-50%,-48%) scale(0.99); box-shadow:0 20px 52px rgba(2,6,23,.5); }
.hero-orb--main:focus-visible{ outline:3px solid rgba(56,189,248,.85); outline-offset:6px; }
.hero-orb--main::before,
.hero-orb--main::after{ content:""; position:absolute; inset:-12%; border-radius:50%; pointer-events:none; }
.hero-orb--main::before{ background:radial-gradient(circle at 50% 0%, rgba(14,93,108,.6) 0%, rgba(14,93,108,.45) 28%, rgba(14,93,108,0) 58%); mix-blend-mode:multiply; opacity:0.8; }
.hero-orb--main::after{ background:radial-gradient(circle at 50% 100%, rgba(185,119,17,.55) 0%, rgba(185,119,17,.36) 32%, rgba(185,119,17,0) 58%); mix-blend-mode:multiply; opacity:0.7; }
.hero-label{ position:relative; z-index:2; font-size:clamp(18px, 4.4vw, 28px); letter-spacing:0.08em; text-transform:none; color:#ffffff; font-weight:600; font-feature-settings:'palt'; }
.hero-meta{ position:relative; z-index:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:3px; text-align:center; color:#f8fafc; font-size:clamp(10px, 2vw, 13px); font-weight:500; letter-spacing:0.06em; text-transform:none; text-shadow:0 6px 18px rgba(10,20,35,.45); }
.hero-meta--bottom{ gap:4px; }
.hero-meta__date{ font-size:clamp(11px, 2.4vw, 14px); font-weight:600; letter-spacing:0.12em; text-transform:uppercase; }
.hero-meta__detail{ font-size:clamp(10px, 2.1vw, 13px); opacity:0.9; }
.hero-meta__detail--day{ white-space:nowrap; }

.review-header .home-header__brand{ letter-spacing:0.12em; }
.hero-number{ font-weight:600; font-size:clamp(11px, 2.4vw, 15px); letter-spacing:0.1em; }
.review-screen{ --review-footer-height:156px; padding-bottom:calc(var(--review-footer-height) + env(safe-area-inset-bottom, 0px)); }
.review-body{ flex:1; width:100%; max-width:720px; margin:0 auto; display:flex; flex-direction:column; gap:24px; justify-content:center; align-items:center; padding-top:calc(var(--header-height) + 8px); padding-bottom:calc(var(--review-footer-height) + 48px); box-sizing:border-box; }
.review-stage{ width:100%; display:flex; justify-content:center; align-items:center; flex:1; padding-top:20px; padding-bottom:20px; box-sizing:border-box; }
.review-card{ width:100%; max-width:520px; min-height:260px; display:flex; align-items:center; justify-content:center; text-align:center; padding:32px; }
.review-face.main{ font-size:clamp(28px, 7vw, 36px); font-weight:700; }
.review-face.back{ display:flex; flex-direction:column; gap:12px; align-items:center; text-align:center; }
.review-meaning-line{ font-size:clamp(22px, 5.6vw, 30px); font-weight:600; color:var(--fg); line-height:1.4; padding-bottom:8px; border-bottom:1px solid rgba(248,250,252,.65); width:100%; text-align:center; }
.review-source-row{ display:flex; justify-content:center; }
.review-source-content{ display:flex; align-items:center; gap:6px; font-size:16px; color:var(--muted); line-height:1.4; text-align:center; }
.review-source-hash{ font-size:22px; font-weight:700; color:var(--muted); }
.review-source-content a{ color:var(--muted); text-decoration:none; border-bottom:1px dotted rgba(148,163,184,.5); }
.review-source-content a:hover{ color:var(--fg); border-bottom-color:rgba(226,232,240,.6); }
.review-source-content a:focus-visible{ outline:2px solid rgba(56,189,248,.75); outline-offset:2px; }
.review-tips-row{ text-align:center; font-size:clamp(18px, 4vw, 22px); color:#cbd5f5; line-height:1.5; }
.review-extra a{ color:var(--primary); text-decoration:underline; }
.review-footer{ position:fixed; left:0; right:0; bottom:0; display:flex; flex-direction:column; align-items:center; gap:14px; padding:18px clamp(24px, 7vw, 128px) calc(18px + env(safe-area-inset-bottom, 0px)); background:rgba(15,23,42,.92); backdrop-filter:blur(18px); border-top:1px solid #1f2937; z-index:35; }
.review-footer__stats{ display:flex; justify-content:center; gap:18px; color:var(--muted); font-size:14px; letter-spacing:0.02em; }
.review-grade-grid{ display:grid; grid-template-columns:repeat(3, 1fr); gap:12px; width:100%; max-width:520px; }
.review-grade{ padding:16px 0; font-size:16px; }
.review-session-screen .leap-session-main,
.session-card-layout .leap-session-main{ padding-top:calc(var(--header-height)); padding-bottom:32px; box-sizing:border-box; }
.input{width:100%; max-width:100%; box-sizing:border-box; padding:12px 12px; border-radius:10px; border:1px solid #334155; background:#0b1220; color:var(--fg); font-size:16px; }
.form-error{ font-size:13px; color:var(--danger); margin-top:-2px; text-align:left; }
.label{font-size:12px; color:var(--muted)}
.center{ display:flex; align-items:center; justify-content:center; }
.big{ font-size:28px; text-align:center; line-height:1.4; }
.muted{ color:var(--muted); }
.footer{ position:fixed; left:0; right:0; bottom:0; background:rgba(8,12,20,.8); backdrop-filter: blur(4px); border-top:1px solid #1f2937; padding:8px 12px;}
.space{height:72px}
.pill{border:1px solid #334155; padding:8px 12px; border-radius:9999px; font-weight:600;}
.word-card__body{display:flex; flex-direction:column; gap:6px;}
.word-card__header{justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap;}
.word-card__phrase{font-weight:700; font-size:16px; color:var(--fg); flex:1 1 auto; min-width:0; word-break:break-word;}
.word-card__actions{display:flex; align-items:center; gap:10px; flex-shrink:0;}
.word-card__action{appearance:none; background:none; border:none; color:var(--muted); padding:0; font-size:14px; font-weight:500; cursor:pointer; transition:color .18s ease, opacity .18s ease;}
.word-card__action:hover{color:var(--fg);}
.word-card__action:focus-visible{outline:2px solid var(--primary); outline-offset:2px;}
.word-card__action--danger{color:var(--danger);}
.word-card__action[disabled]{opacity:0.5; cursor:not-allowed;}
.word-card__next{font-size:12px;}
.word-card__stats{font-size:12px; margin-top:0;}
.word-card__meaning{margin-top:4px; color:#4ade80; font-weight:600; font-size:15px;}
.word-card__tips{margin-top:4px; display:flex; align-items:flex-start; gap:6px; font-size:13px; color:var(--muted);}
.word-card__source{margin-top:4px; font-size:13px; overflow-wrap:anywhere; display:flex; align-items:flex-start; gap:6px; color:var(--muted);}
.word-card__source-link{color:var(--muted); text-decoration:none; border-bottom:1px dotted rgba(148,163,184,.5); transition:color .18s ease, border-color .18s ease; word-break:break-word;}
.word-card__source-link:hover{color:var(--fg); border-bottom-color:rgba(226,232,240,.6);}
.word-card__source-link:focus-visible{outline:2px solid var(--primary); outline-offset:2px;}
.word-card__footer{display:flex; justify-content:space-between; align-items:center; margin-top:8px; gap:12px; flex-wrap:wrap;}
.word-card__stats,
.word-card__next{overflow-wrap:anywhere;}
.word-card__icon{flex-shrink:0; color:var(--muted);}
.stack{display:flex; gap:8px;}
.tap{ user-select:none;}

.leap-header .home-header__brand{text-transform:none; letter-spacing:0.08em;}
.leap-setup-main{flex:1; display:flex; justify-content:center; padding:40px clamp(24px, 6vw, 120px);}
.leap-setup-grid{width:100%; max-width:1080px; display:flex; gap:28px; align-items:flex-start; justify-content:center; margin:0 auto;}
.leap-setup-form{flex:0 0 440px; width:100%; max-width:440px; display:flex; flex-direction:column; gap:20px;}
.leap-control-card{display:flex; flex-direction:column; gap:20px; padding:24px; background:rgba(21,31,55,.94); border:1px solid rgba(56,189,248,.18);}
.leap-control-title{margin:0; font-size:18px; font-weight:700; letter-spacing:0.06em; color:var(--fg);}
.leap-control-pill{font-size:13px; letter-spacing:0.04em; color:var(--muted); background:rgba(15,23,42,.75); border:1px solid rgba(51,65,85,.55); border-radius:999px; padding:6px 12px; white-space:nowrap;}
.leap-range-line{display:flex; flex-direction:column; align-items:flex-start; gap:12px;}
.leap-range-label{font-size:13px; letter-spacing:0.06em; color:var(--muted); text-transform:uppercase; font-weight:600; display:flex; align-items:center;}
.leap-range-stack{display:flex; flex-wrap:wrap; gap:12px; width:100%;}
.leap-range-option{display:flex; flex-direction:column; gap:6px; min-width:0; flex:1 1 0;}
.leap-range-pill{position:relative; display:flex; align-items:center; gap:12px; padding:12px 18px; border-radius:999px; border:1px solid rgba(56,189,248,.82); background:rgba(15,27,53,.78); box-shadow:0 14px 28px rgba(14,165,233,.18); transition:border-color .18s ease, background .18s ease, box-shadow .18s ease;}
.leap-range-pill:hover,
.leap-range-pill:focus-within{border-color:rgba(96,200,255,.95); background:rgba(12,24,46,.92); box-shadow:0 16px 34px rgba(14,165,233,.26);}
.leap-range-pill.filled{border-color:rgba(96,200,255,.95); background:rgba(12,24,46,.92); box-shadow:0 16px 34px rgba(14,165,233,.26);}
.leap-range-pill__label{font-size:12px; letter-spacing:0.08em; color:rgba(226,232,240,.88);}
.leap-range-input{flex:1; min-width:0; background:transparent; border:none; color:var(--fg); font-size:16px; letter-spacing:0.04em; text-align:left; padding:0; outline:none; appearance:textfield;}
.leap-range-input::placeholder{color:rgba(148,163,184,.6);}
.leap-range-input::-webkit-outer-spin-button,
.leap-range-input::-webkit-inner-spin-button{margin:0;}
.leap-error{margin-top:4px;}
.leap-range-summary{font-size:12px; letter-spacing:0.05em; color:var(--muted);}
.leap-checkbox{display:flex; align-items:center; gap:10px; font-weight:600; letter-spacing:0.02em;}
.leap-checkbox input{width:18px; height:18px;}
.leap-order-row{display:flex; align-items:center; gap:16px; flex-wrap:wrap;}
.leap-order-label{font-size:13px; letter-spacing:0.06em; color:var(--muted);}
.leap-order-pills{display:flex; gap:12px; flex-wrap:wrap;}
.leap-order-pill{position:relative; display:flex; align-items:center; justify-content:center; gap:8px; padding:12px 18px; border-radius:999px; border:1px solid rgba(51,65,85,.6); background:rgba(15,23,42,.7); cursor:pointer; font-weight:600; color:var(--muted); letter-spacing:0.02em; transition:border-color .18s ease, background .18s ease, color .18s ease, box-shadow .18s ease;}
.leap-order-pill:hover{border-color:#3b82f6; color:#e0f2fe; box-shadow:0 12px 24px rgba(59,130,246,.2);}
.leap-order-pill input{position:absolute; inset:0; opacity:0; pointer-events:none;}
.leap-order-pill.active{background:rgba(56,189,248,.24); border-color:rgba(56,189,248,.75); color:#e0f2fe; box-shadow:0 14px 28px rgba(14,165,233,.22);}
.leap-actions{display:flex; align-items:center; gap:16px; margin-top:8px;}
.leap-checkbox-inline{position:relative; display:inline-flex; align-items:center; gap:10px; font-weight:600; letter-spacing:0.02em; color:var(--muted); cursor:pointer; padding:0; border:none; background:transparent;}
.leap-checkbox-inline input{position:absolute; inset:0; opacity:0; cursor:pointer;}
.leap-checkbox-inline:hover .leap-checkbox-box{border-color:#3b82f6;}
.leap-checkbox-inline:hover .leap-checkbox-label{color:#e0f2fe;}
.leap-checkbox-inline input:focus-visible + .leap-checkbox-box{outline:2px solid rgba(96,200,255,.9); outline-offset:2px;}
.leap-checkbox-inline input:checked ~ .leap-checkbox-label{color:#e0f2fe;}
.leap-checkbox-box{position:relative; width:20px; height:20px; border-radius:6px; border:2px solid rgba(56,189,248,.75); display:flex; align-items:center; justify-content:center; background:transparent; transition:background .18s ease, border-color .18s ease, box-shadow .18s ease;}
.leap-checkbox-box::after{content:''; width:8px; height:14px; border-right:2px solid transparent; border-bottom:2px solid transparent; transform:rotate(45deg); transition:border-color .18s ease;}
.leap-checkbox-inline input:checked + .leap-checkbox-box{background:rgba(56,189,248,.28); border-color:rgba(56,189,248,.95); box-shadow:0 8px 20px rgba(14,165,233,.2);}
.leap-checkbox-inline input:checked + .leap-checkbox-box::after{border-color:#e0f2fe;}
.leap-checkbox-label{color:inherit; transition:color .18s ease;}
.leap-preview-panel{flex:0 0 440px; width:100%; max-width:440px; display:flex; flex-direction:column; gap:20px; padding:24px; min-height:360px; background:rgba(10,16,30,.94); border:1px solid rgba(15,118,110,.22); box-sizing:border-box;}
.leap-preview-header{display:flex; justify-content:space-between; align-items:center; gap:16px; flex-wrap:wrap;}
.leap-preview-body{flex:1; display:flex; flex-direction:column; gap:10px; overflow:auto; padding-right:6px;}
.leap-preview-list{display:flex; flex-direction:column; gap:10px;}
.leap-preview-card{position:relative; border:1px solid rgba(51,65,85,.5); background:rgba(11,18,32,.92); border-radius:12px; padding:14px 16px; display:flex; flex-direction:column; gap:8px; cursor:pointer; transition:border-color .2s ease, background .2s ease, box-shadow .2s ease, transform .2s ease;}
.leap-preview-card:hover{border-color:rgba(56,189,248,.4); box-shadow:0 12px 28px rgba(14,165,233,.16); transform:translateY(-1px);}
.leap-preview-card:focus-visible{outline:2px solid var(--primary); outline-offset:3px;}
.leap-preview-card.selected{border-color:rgba(56,189,248,.75); background:rgba(14,165,233,.18); box-shadow:0 12px 28px rgba(14,165,233,.2);}
.leap-preview-card.in-range:not(.selected){border-color:rgba(34,197,94,.4); background:rgba(6,95,70,.16);}
.leap-preview-card.focus{box-shadow:0 18px 36px rgba(59,130,246,.25);}
.leap-preview-card__meta{display:flex; align-items:center; justify-content:space-between; gap:10px;}
.leap-preview-card__heading{font-size:11px; letter-spacing:0.08em; color:var(--muted); text-transform:uppercase;}
.leap-preview-check{width:20px; height:20px; border-radius:999px; border:1px solid rgba(34,197,94,.4); display:flex; align-items:center; justify-content:center; font-size:12px; color:transparent; background:rgba(15,23,42,.8); transition:color .18s ease, border-color .18s ease, background .18s ease, transform .18s ease;}
.leap-preview-card.selected .leap-preview-check{color:#34d399; border-color:rgba(34,197,94,.85); background:rgba(6,95,70,.35); transform:scale(1.1);}
.leap-preview-card__content{display:flex; flex-direction:column; gap:6px;}
.leap-preview-card__phrase-row{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;}
.leap-preview-card__phrase{font-size:18px; font-weight:600; letter-spacing:0.03em; color:var(--fg);}
.leap-preview-card__meaning{font-size:14px; font-weight:500; color:var(--accent);}
.leap-preview-card__details{display:flex; flex-direction:column; gap:4px; margin-top:2px;}
.leap-preview-card__example{font-size:12px; font-style:italic; color:var(--muted); line-height:1.4;}
.leap-preview-card__source{font-size:11px; color:var(--muted); line-height:1.4;}
.leap-preview-empty{min-height:140px; display:flex; align-items:center; justify-content:center; border:1px dashed rgba(51,65,85,.6); border-radius:14px; padding:24px; font-size:14px;}
.leap-preview-filters{display:flex; align-items:center; gap:8px; flex-wrap:wrap;}
.leap-preview-filter{appearance:none; border-radius:999px; border:1px solid rgba(51,65,85,.6); background:rgba(17,24,39,.75); color:var(--muted); font-size:13px; letter-spacing:0.04em; padding:6px 14px; cursor:pointer; transition:border-color .18s ease, background .18s ease, color .18s ease, box-shadow .18s ease;}
.leap-preview-filter:hover{border-color:rgba(56,189,248,.6); color:#e0f2fe;}
.leap-preview-filter.active{border-color:rgba(56,189,248,.85); background:rgba(56,189,248,.22); color:#e0f2fe; box-shadow:0 12px 20px rgba(14,165,233,.22);}
.leap-preview-filter:disabled{opacity:.4; cursor:default;}
.leap-chunk-controls{display:flex; align-items:center; gap:8px; padding:6px 16px; border-radius:12px; border:1px solid rgba(51,65,85,.5); background:rgba(15,23,42,.65); flex-wrap:nowrap; width:100%; box-sizing:border-box;}
.leap-chunk-controls--footer{justify-content:center; margin-top:16px;}
.leap-chunk-nav{appearance:none; width:32px; height:32px; border-radius:999px; border:1px solid rgba(56,189,248,.45); background:transparent; color:var(--fg); display:flex; align-items:center; justify-content:center; font-size:16px; font-weight:600; cursor:pointer; transition:border-color .18s ease, background .18s ease, color .18s ease;}
.leap-chunk-nav:hover:not(:disabled){border-color:rgba(56,189,248,.75); background:rgba(56,189,248,.2); color:#e0f2fe;}
.leap-chunk-nav:disabled{opacity:.35; cursor:default;}
.leap-chunk-track{display:flex; align-items:center; gap:8px; overflow-x:auto; padding:2px 4px; scrollbar-width:none; -ms-overflow-style:none; touch-action:pan-x; -webkit-overflow-scrolling:touch; flex:1 1 auto; min-width:0; position:relative;}
.leap-chunk-track::-webkit-scrollbar{display:none;}
.leap-chunk-pill{appearance:none; border-radius:999px; border:1px solid rgba(51,65,85,.6); background:rgba(17,24,39,.9); color:var(--muted); padding:4px 12px; font-size:12px; letter-spacing:0.05em; cursor:pointer; transition:border-color .18s ease, background .18s ease, color .18s ease;}
.leap-chunk-pill:hover{border-color:rgba(56,189,248,.6); color:#e0f2fe;}
.leap-chunk-pill.active{border-color:rgba(56,189,248,.85); background:rgba(56,189,248,.24); color:#e0f2fe;}
.leap-chunk-active{font-size:12px; letter-spacing:0.05em; color:var(--muted);}

.leap-session-screen{--header-height:72px; --session-footer-space:calc(180px + env(safe-area-inset-bottom, 0px)); padding-bottom:var(--session-footer-space); min-height:100vh; height:100vh; overflow:hidden;}
@supports (height:100svh){
  .leap-session-screen{ min-height:100svh; height:100svh; }
}
@supports (height:100dvh){
  .leap-session-screen{ min-height:100dvh; height:100dvh; }
}
.leap-session-main{flex:1; display:flex; align-items:center; justify-content:center; padding:16px 0; min-height:calc(100vh - var(--header-height) - var(--session-footer-space));}
@supports (height:100svh){
  .leap-session-main{ min-height:calc(100svh - var(--header-height) - var(--session-footer-space)); }
}
@supports (height:100dvh){
  .leap-session-main{ min-height:calc(100dvh - var(--header-height) - var(--session-footer-space)); }
}
.leap-card{width:min(520px, 100%); display:flex; flex-direction:column; gap:14px; text-align:center;}
.leap-card__heading{font-size:14px; font-weight:600; color:var(--muted); letter-spacing:0.08em;}
.leap-card__phrase{font-size:32px; font-weight:700; letter-spacing:0.04em; color:var(--fg);}
.leap-card__meaning{font-size:18px; color:var(--accent);}
.leap-card__example{font-size:15px; line-height:1.6;}
.leap-card__source{font-size:13px;}
.leap-session-footer{position:fixed; left:0; right:0; bottom:0; padding:22px clamp(24px, 7vw, 128px) calc(22px + env(safe-area-inset-bottom, 0px)); background:rgba(15,23,42,.92); backdrop-filter:blur(18px); border-top:1px solid #1f2937; display:flex; align-items:center; justify-content:space-between; gap:24px; z-index:35;}

.settings-body{ width:100%; max-width:720px; margin:0 auto; padding:0 clamp(16px, 6vw, 48px); box-sizing:border-box; display:flex; flex-direction:column; align-items:center; gap:20px; }
.settings-screen .settings-body{ padding-top:calc(var(--header-height) + 24px); padding-bottom:32px; }
.settings-cluster{ width:100%; max-width:520px; margin:0 auto; display:flex; flex-direction:column; align-items:center; gap:16px; padding:24px; border-radius:24px; border:1px solid rgba(148,163,184,.32); background:rgba(13,21,34,.78); box-sizing:border-box; }
.settings-cluster__label{ font-size:12px; letter-spacing:0.34em; color:var(--muted); text-transform:uppercase; text-align:center; }
.settings-card{ width:100%; max-width:440px; border-radius:20px; background:rgba(14,22,38,.92); border:1px solid rgba(94,234,212,.35); display:flex; flex-direction:column; gap:14px; padding:24px 28px; box-sizing:border-box; transition:box-shadow .2s ease, border-color .2s ease; }
.settings-card__eyebrow{ font-size:11px; letter-spacing:0.32em; color:var(--muted); text-transform:uppercase; }
.settings-card__header{ appearance:none; display:flex; align-items:flex-start; justify-content:space-between; gap:12px; background:none; border:none; padding:0; margin:0; color:inherit; width:100%; text-align:left; cursor:pointer; }
.settings-card__title-group{ flex:1; display:flex; flex-direction:column; gap:4px; }
.settings-card__title{ font-size:20px; font-weight:700; letter-spacing:0.08em; }
.settings-card__description{ font-size:14px; color:var(--muted); line-height:1.6; }
.settings-card__content{ overflow:hidden; transition:max-height .24s ease; }
.settings-form{ width:100%; gap:14px; }
.calendar-body{ display:flex; flex-direction:column; align-items:stretch; justify-content:flex-start; gap:18px; min-height:0; }
.calendar-screen{ background:#020617; color:#e2e8f0; overflow:hidden; padding-bottom:calc(var(--footer-height) + 32px); display:flex; flex-direction:column; min-height:100vh; }
.calendar-screen--month{ padding:calc(var(--header-height) + 24px) clamp(18px, 6vw, 48px) calc(var(--footer-height) + 48px); }
.calendar-screen-day.page-screen{ padding:calc(env(safe-area-inset-top, 0px)) 0 calc(var(--footer-height) + env(safe-area-inset-bottom, 0px)); }
.calendar-month-view{ flex:1; display:flex; padding:0 clamp(12px, 4vw, 36px) clamp(24px, 6vw, 56px); box-sizing:border-box; width:100%; }
.calendar-month-view > section{ flex:1; }
.calendar-day-frame{ --day-frame-width:min(420px, calc(100vw - 32px)); --day-toolbar-height:84px; --day-week-grid-height:140px; --day-week-grid-gap:8px; --day-main-offset:0px; width:var(--day-frame-width); margin:0 auto; background:linear-gradient(180deg, #070b16 0%, #050912 100%); border-radius:36px; box-shadow:0 32px 80px rgba(0,0,0,.55); display:flex; flex-direction:column; min-height:calc(100vh - var(--footer-height) - 48px); padding-top:calc(var(--day-toolbar-height) + var(--day-week-grid-gap) + var(--day-week-grid-height) + var(--day-main-offset)); padding-bottom:calc(8px + env(safe-area-inset-bottom, 0px)); overflow:hidden; position:relative; }
.calendar-day-toolbar{ display:flex; align-items:center; justify-content:space-between; padding:4px 18px 6px; transition:filter .25s ease; }
.calendar-day-toolbar--header{ position:fixed; top:calc(max(0px, env(safe-area-inset-top, 0px) - 6px)); left:50%; transform:translateX(-50%); width:var(--day-frame-width); z-index:100; padding:4px 18px; min-height:var(--day-toolbar-height); background:rgba(4,6,14,.97); backdrop-filter:blur(18px); border-radius:26px; box-shadow:0 14px 32px rgba(0,0,0,.45); }
.calendar-day-toolbar--header.is-dimmed{ filter:brightness(.45) saturate(.65); }
.calendar-day-toolbar__nav{ display:flex; align-items:center; gap:6px; border:none; background:transparent; color:#f87171; font-weight:700; font-size:20px; letter-spacing:0.08em; cursor:pointer; }
.calendar-day-toolbar__actions{ display:flex; align-items:center; gap:12px; }
.calendar-day-toolbar__action{ width:48px; height:48px; border-radius:16px; border:1px solid rgba(148,163,184,.35); background:rgba(15,23,42,.72); color:#e2e8f0; display:flex; align-items:center; justify-content:center; transition:transform .18s ease, border-color .18s ease; cursor:pointer; }
.calendar-day-toolbar__action.is-accent{ background:#ef4444; border-color:#ef4444; }
.calendar-day-toolbar__action:active{ transform:scale(0.94); }
.calendar-day-week-grid{ position:fixed; top:calc(max(0px, env(safe-area-inset-top, 0px) - 6px) + var(--day-toolbar-height) + var(--day-week-grid-gap)); left:50%; transform:translateX(-50%); width:var(--day-frame-width); z-index:99; display:grid; grid-template-columns:repeat(7, minmax(0, 1fr)); gap:4px; padding:8px 16px 16px; background:rgba(4,6,14,.97); border-radius:22px; box-shadow:0 16px 30px rgba(0,0,0,.45); transition:filter .25s ease; }
.calendar-day-week-grid.is-dimmed{ filter:brightness(.45) saturate(.65); }
.calendar-day-week-grid__weekday{ display:flex; align-items:center; justify-content:center; font-size:12px; letter-spacing:0.18em; text-transform:uppercase; color:#cbd5f5; }
.calendar-day-week-grid__cell{ border:none; background:transparent; color:#f8fafc; font-weight:600; display:flex; flex-direction:column; align-items:center; gap:4px; padding:6px 0; cursor:pointer; width:100%; }
.calendar-day-week-grid__number{ width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; }
.calendar-day-week-grid__dot{ width:6px; height:6px; border-radius:999px; background:#facc15; }
.calendar-day-week-grid__cell.is-today .calendar-day-week-grid__number{ border:1px solid #f97316; color:#f97316; }
.calendar-day-week-grid__cell.is-selected .calendar-day-week-grid__number{ background:#ef4444; color:#fff; box-shadow:0 8px 18px rgba(239,68,68,.35); }
.calendar-day-main{ flex:1; min-height:0; padding:0 18px calc(18px + env(safe-area-inset-bottom, 0px)) 22px; display:flex; box-sizing:border-box; overflow:auto; scrollbar-width:none; -ms-overflow-style:none; }
.calendar-day-main.is-dimmed .calendar-time-column{ filter:brightness(.45) saturate(.65); transition:filter .25s ease; }
.calendar-day-main.is-dimmed .calendar-grid{ background-color:rgba(4,6,13,.9); border-color:rgba(30,40,55,.8); transition:background-color .25s ease, border-color .25s ease; }
.calendar-day-main.is-dimmed .calendar-grid__surface{ filter:brightness(.45) saturate(.65); transition:filter .25s ease; }
.calendar-day-main.is-dimmed .calendar-grid::before{ filter:brightness(.45) saturate(.65); transition:filter .25s ease; }
.calendar-day-main.is-dimmed .calendar-event:not(.is-expanded){ filter:brightness(.45) saturate(.65); transition:filter .25s ease; }
.calendar-day-main::-webkit-scrollbar{ width:0; height:0; }
.calendar-day-main::-webkit-scrollbar-thumb{ display:none; }
.calendar-day-frame .calendar-timeline{ --calendar-hour-height:32px; }
.calendar-month-panel{ border-radius:32px; padding:22px; background:rgba(15,23,42,.92); border:1px solid rgba(51,65,85,.8); box-shadow:0 36px 72px rgba(2,6,23,.6); display:flex; flex-direction:column; gap:14px; width:100%; height:100%; }
.calendar-month-nav{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; }
.calendar-month-nav--header{ position:sticky; top:calc(var(--header-height, 0px)); z-index:5; background:linear-gradient(180deg, rgba(5,7,15,.9), rgba(5,7,15,0)); padding:18px clamp(18px, 6vw, 40px) 10px; }
.calendar-month-nav__title{ font-size:22px; font-weight:700; letter-spacing:0.08em; color:#f8fafc; margin:0; }
.calendar-month-nav__button{ width:44px; height:44px; border-radius:16px; border:1px solid rgba(51,65,85,.9); background:rgba(15,23,42,.9); color:#f8fafc; display:flex; align-items:center; justify-content:center; transition:transform .18s ease, border-color .18s ease; }
.calendar-month-nav__button:active{ transform:scale(0.94); border-color:#94a3b8; }
.calendar-weekdays{ display:grid; grid-template-columns:repeat(7, 1fr); text-align:center; font-size:12px; letter-spacing:0.12em; text-transform:uppercase; color:#94a3b8; }
.calendar-weekdays__label{ font-weight:600; }
.calendar-month-grid{ display:grid; grid-template-columns:repeat(7, 1fr); gap:6px; }
.calendar-day{ border:none; background:transparent; border-radius:16px; padding:6px 0; display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:52px; color:#f8fafc; font-weight:600; gap:5px; transition:transform .15s ease; }
.calendar-day:active{ transform:scale(0.94); }
.calendar-day.is-outside{ color:#475569; }
.calendar-day__number{ width:36px; height:36px; border-radius:999px; display:flex; align-items:center; justify-content:center; font-size:16px; }
.calendar-day.is-today .calendar-day__number{ border:1.5px solid #f97316; color:#f97316; }
.calendar-day.is-selected .calendar-day__number{ background:#ef4444; color:#fff; box-shadow:0 8px 18px rgba(239,68,68,.35); }
.calendar-day__dot{ width:6px; height:6px; border-radius:999px; background:#38bdf8; }
.calendar-day.is-selected .calendar-day__dot{ background:#fff; }
.calendar-surface{ flex:1; width:100%; max-width:100%; border-radius:32px; border:1px solid rgba(51,65,85,.7); padding:20px 22px; background:rgba(15,23,42,.95); box-shadow:0 24px 60px rgba(2,6,23,.6); overflow:hidden; min-height:0; box-sizing:border-box; margin:0 auto; }
.calendar-day-view{ flex:1; }
.calendar-scroll{ flex:1; width:100%; overflow:auto; padding-right:8px; box-sizing:border-box; }
.calendar-scroll::-webkit-scrollbar{ width:8px; }
.calendar-scroll::-webkit-scrollbar-thumb{ background:rgba(148,163,184,.45); border-radius:999px; }
.calendar-timeline{ --calendar-hours:24; --calendar-hour-height:52px; display:grid; grid-template-columns:auto 1fr; gap:8px; align-items:start; width:100%; box-sizing:border-box; min-height:calc(var(--calendar-hour-height) * var(--calendar-hours)); height:calc(var(--calendar-hour-height) * var(--calendar-hours)); }
.calendar-timeline--day{ gap:12px; }
.calendar-time-column{ position:relative; height:100%; display:flex; flex-direction:column; align-items:flex-end; justify-content:flex-start; font-weight:600; color:#64748b; font-size:12px; letter-spacing:0.12em; text-align:right; padding-right:6px; }
.calendar-time-label{ height:var(--calendar-hour-height); display:flex; align-items:center; justify-content:flex-end; width:100%; flex-shrink:0; }
.calendar-time-label__drag-time{ font-weight:600; color:#fff; }
.calendar-time-indicator{ position:absolute; left:-6px; transform:translate(-100%, -50%); background:rgba(15,23,42,.92); color:#f8fafc; padding:4px 10px; border-radius:999px; font-size:11px; letter-spacing:0.08em; text-transform:uppercase; box-shadow:0 12px 24px rgba(15,23,42,.35); pointer-events:none; z-index:4; opacity:.95; }
.calendar-grid{ position:relative; height:calc(var(--calendar-hour-height) * var(--calendar-hours)); border-radius:24px; border:1px solid rgba(71,85,105,.8); background:rgba(10,15,28,.9); overflow:hidden; touch-action:pan-y; box-shadow:inset 0 0 0 1px rgba(15,23,42,.65); contain:layout style; isolation:isolate; }
.calendar-grid--day{ border-radius:22px; border-color:rgba(71,85,105,.8); background:rgba(5,8,20,.92); }
.calendar-grid__surface{ position:absolute; inset:0; background-image:repeating-linear-gradient(to bottom, transparent, transparent calc(var(--calendar-hour-height) - 1px), rgba(51,65,85,.6) calc(var(--calendar-hour-height) - 1px), rgba(51,65,85,.6) var(--calendar-hour-height)); background-position-y: calc(var(--calendar-hour-height) / 2); pointer-events:none; z-index:1; }
.calendar-grid::before{ content:''; position:absolute; top:0; bottom:0; left:22px; width:2px; background:rgba(239,68,68,.7); z-index:3; }
.calendar-grid--expanded{ overflow:visible; contain:none; }
.calendar-grid--expanded::after{ content:''; position:absolute; inset:-32px -12px -32px -38px; background:rgba(2,6,23,.6); border-radius:32px; pointer-events:none; z-index:2; }
.calendar-event{ position:absolute; left:30px; right:20px; border-radius:18px; padding:8px 12px; display:flex; flex-direction:column; justify-content:space-between; gap:4px; box-shadow:0 20px 30px rgba(0,0,0,.35); border:1px solid transparent; z-index:3; cursor:grab; transition:box-shadow .18s ease, transform .18s ease, opacity .18s ease; touch-action:manipulation; overflow:visible; background-clip:padding-box; box-sizing:border-box; }
.calendar-event.is-dragging{ cursor:grabbing; box-shadow:0 28px 48px rgba(0,0,0,.45); opacity:.96; transform:scale(1.01); }
.calendar-event.is-expanded{ box-shadow:0 32px 66px rgba(0,0,0,.55); transform:scale(1.015); }
.calendar-event.is-dimmed{ filter:brightness(.45) saturate(.65); }
.calendar-event__content{ display:flex; flex-direction:column; gap:8px; transition:max-height .25s ease; padding-right:18px; position:relative; z-index:3; flex:1; }
.calendar-event:not(.is-expanded) .calendar-event__content{ max-height:68px; overflow:hidden; }
.calendar-event.is-expanded .calendar-event__content{ max-height:320px; }
.calendar-event__title,
.calendar-event__memo{ background:none; border:none; padding:0; text-align:left; font:inherit; color:#0f172a; cursor:text; line-height:1.35; letter-spacing:0.02em; appearance:none; overflow-wrap:anywhere; word-break:break-word; }
.calendar-event__title{ font-size:15px; font-weight:700; }
.calendar-event__memo{ font-size:12px; letter-spacing:0.04em; opacity:.88; }
.calendar-event__memo.is-empty{ opacity:.55; font-style:italic; }
.calendar-event__title:focus-visible,
.calendar-event__memo:focus-visible{ outline:2px solid rgba(59,130,246,.38); outline-offset:2px; border-radius:8px; }
.calendar-event__input,
.calendar-event__textarea{ width:100%; font:inherit; color:#0f172a; background:rgba(255,255,255,.86); border:1px solid rgba(148,163,184,.45); border-radius:12px; padding:8px 12px; box-sizing:border-box; transition:border-color .18s ease, box-shadow .18s ease; }
.calendar-event__input:focus,
.calendar-event__textarea:focus{ outline:none; border-color:rgba(59,130,246,.55); box-shadow:0 0 0 3px rgba(59,130,246,.22); }
.calendar-event__textarea{ resize:none; min-height:60px; line-height:1.45; }
.calendar-event:not(.is-expanded) .calendar-event__title,
.calendar-event:not(.is-expanded) .calendar-event__memo{ display:-webkit-box; -webkit-box-orient:vertical; overflow:hidden; }
.calendar-event:not(.is-expanded) .calendar-event__title{ -webkit-line-clamp:1; }
.calendar-event:not(.is-expanded) .calendar-event__memo{ -webkit-line-clamp:2; }
.calendar-event__actions{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-top:auto; }
.calendar-event__action{ appearance:none; border:2px solid; border-radius:50%; width:36px; height:36px; padding:0; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:border-color .18s ease, transform .18s ease, box-shadow .18s ease, background-color .18s ease; background:transparent; }
.calendar-event__action:active{ transform:scale(0.97); }
.calendar-event__action:focus-visible{ outline:2px solid rgba(59,130,246,.45); outline-offset:2px; }
.calendar-event__action--delete{ border-color:rgba(185,28,28,.6); color:#b91c1c; }
.calendar-event__action--delete.is-deleting{ border-color:rgba(185,28,28,.8); background-color:rgba(239,68,68,.24); }
.calendar-event__action--delete:active{ background-color:rgba(239,68,68,.24); }
.calendar-event__action--move{ margin-left:auto; border-color:rgba(29,78,216,.6); color:#1d4ed8; user-select:none; -webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; touch-action:none; }
.calendar-event__action--move:hover{ border-color:rgba(29,78,216,.8); background-color:rgba(59,130,246,.16); }
.calendar-event__action--move:active{ background-color:rgba(59,130,246,.26); }
.calendar-drag-button .calendar-event__action--move{ background-color:rgba(59,130,246,.26); border-color:rgba(29,78,216,.8); }
.calendar-event--white{ background:rgba(248,250,252,.92); border-color:rgba(226,232,240,.9); }
.calendar-event--green{ background:rgba(220,252,231,.9); border-color:rgba(134,239,172,.8); }
.calendar-event--blue{ background:rgba(219,234,254,.9); border-color:rgba(147,197,253,.8); }
.calendar-event--red{ background:rgba(254,226,226,.95); border-color:rgba(248,113,113,.6); }
.calendar-event--yellow{ background:rgba(254,243,199,.95); border-color:rgba(251,191,36,.7); }
.calendar-trash-zone{ position:absolute; left:50%; bottom:18px; transform:translateX(-50%); display:flex; align-items:center; gap:10px; padding:12px 20px; border-radius:999px; background:rgba(220,38,38,.9); color:#fef2f2; font-size:12px; letter-spacing:0.12em; text-transform:uppercase; box-shadow:0 26px 54px rgba(220,38,38,.38); pointer-events:none; opacity:.88; transition:transform .2s ease, box-shadow .2s ease, opacity .2s ease; }
.calendar-trash-zone svg{ flex-shrink:0; }
.calendar-trash-zone span{ font-weight:600; }
.calendar-trash-zone.is-active{ opacity:1; transform:translateX(-50%) scale(1.05); box-shadow:0 32px 64px rgba(220,38,38,.48); }
.calendar-current-time{ position:absolute; left:22px; right:14px; height:2px; background:#ef4444; display:flex; align-items:center; z-index:4; }
.calendar-current-time__dot{ width:10px; height:10px; border-radius:999px; background:#ef4444; border:2px solid #fff; box-shadow:0 0 0 6px rgba(239,68,68,.25); }
@media (max-width:640px){
  .calendar-screen--month{ padding:calc(var(--header-height) + 18px) 16px calc(var(--footer-height) + 32px); }
  .calendar-month-view{ padding:0 12px 24px; }
  .calendar-month-panel{ padding:16px; border-radius:26px; }
  .calendar-day__number{ width:30px; height:30px; font-size:14px; }
  .calendar-surface{ padding:16px; border-radius:26px; }
  .calendar-timeline{ --calendar-hour-height:48px; }
  .calendar-time-column{ font-size:11px; padding-bottom:8px; }
  .calendar-day-week-grid{ padding:4px 12px 12px; }
  .calendar-day-frame{ --day-toolbar-height:70px; --day-week-grid-height:100px; --day-week-grid-gap:6px; }
  .calendar-day-main{ padding:2px 10px 20px 10px; }
  .calendar-day-frame{ width:calc(100vw - 20px); border-radius:28px; }
}
.leap-session-actions{display:flex; gap:14px;}
.leap-session-actions .btn{min-width:140px; font-size:18px;}
.leap-session-stats{display:flex; gap:18px; font-size:14px; color:var(--muted); flex-wrap:wrap;}
.leap-finished-card{display:flex; flex-direction:column; align-items:center; gap:16px; text-align:center;}
.leap-finished-title{font-size:20px; font-weight:700; letter-spacing:0.04em;}
.leap-finished-actions{display:flex; flex-wrap:wrap; justify-content:center; gap:12px; margin-top:4px;}
.leap-finished-actions .btn{min-width:160px;}

@media (max-width:960px){
  .leap-setup-grid{flex-direction:column; gap:24px; align-items:stretch; justify-content:flex-start;}
  .leap-setup-form{width:100%; max-width:100%; flex:1 1 auto;}
  .leap-preview-panel{width:100%; max-width:100%; flex:1 1 auto;}
}

@media (max-width:480px){
  .container{ padding:calc(12px + env(safe-area-inset-top, 0px)) 12px calc(20px + env(safe-area-inset-bottom, 0px)); }
  .card{ padding:12px; }
  .row{ gap:10px; }
  .col{ gap:6px; }
  .home-layout{ gap:10px; }
  .home-screen{ padding:calc(var(--header-height) + 16px) 20px calc(var(--footer-height) + 28px + env(safe-area-inset-bottom, 0px)); }
  .home-header{ padding:calc(10px + env(safe-area-inset-top, 0px)) 20px 10px; }
  .home-header__brand{ font-size:16px; letter-spacing:0.08em; }
  .icon-button{ width:56px; height:56px; }
  .home-body{ gap:18px; }
  .page-screen{ padding:calc(var(--header-height) + 18px) 20px calc(var(--footer-height) + 28px + env(safe-area-inset-bottom, 0px)); }
  .footer-nav{ padding:8px 12px calc(6px + env(safe-area-inset-bottom, 0px)); gap:4px; }
  .footer-nav__icon{ width:34px; height:34px; border-radius:10px; }
  .footer-nav__label{ font-size:8px; letter-spacing:0.1em; }
  .settings-body{ padding:0 16px; width:100%; }
  .settings-cluster{ padding:18px; border-radius:20px; }
  .settings-card{ padding:20px; width:100%; }
  .settings-card__title{ font-size:18px; }
  .settings-screen .settings-body{ padding-top:calc(var(--header-height) - 50px); padding-bottom:24px; }
  .hero-stack{ --circle-size:clamp(220px, 74vw, 360px); height:calc(var(--circle-size) * 1.5); }
  .hero-orb--main{ width:calc(var(--circle-size) * 0.96); height:calc(var(--circle-size) * 0.96); border-width:4px; }
  .hero-label{ letter-spacing:0.08em; font-size:clamp(18px, 7vw, 26px); }
  .hero-meta{ font-size:clamp(10px, 3.8vw, 13px); gap:3px; }
  .hero-meta__date{ letter-spacing:0.1em; }
  .hero-number{ font-size:clamp(11px, 5vw, 15px); }
  .hero-meta__detail--day{ white-space:normal; }
  .fab-container{ right:20px; bottom:calc(var(--footer-height) + 20px + env(safe-area-inset-bottom, 0px)); gap:10px; }
  .fab-item{ padding:16px 20px; font-size:17px; min-width:190px; }
  .fab-toggle{ width:56px; height:56px; font-size:30px; }
  .modal-surface{ width:calc(100% - 28px); border-radius:16px; }
  .modal-header{ padding:16px 18px 12px; }
  .modal-body{ padding:18px; }
  .modal-title{ font-size:16px; }
  .modal-actions{ flex-direction:column; align-items:stretch; gap:8px; }
  .words-screen{ padding:calc(var(--header-height) + 14px) 20px calc(100px + env(safe-area-inset-bottom, 0px)); }
  .words-toolbar{ padding:14px; gap:8px; }
  .words-header__search{ gap:6px; }
  .words-header__metrics{ font-size:12px; }
  .words-main{ padding-top:10px; }
  .review-screen{ --review-footer-height:188px; }
  .review-body{ gap:20px; padding-top:calc(var(--header-height) + 12px); padding-bottom:calc(var(--review-footer-height) + 32px); }
  .review-card{ min-height:220px; padding:24px 18px; }
  .review-footer{ gap:12px; padding:16px 20px calc(16px + env(safe-area-inset-bottom, 0px)); }
  .review-footer__stats{ flex-direction:column; align-items:center; gap:6px; font-size:13px; }
  .review-grade-grid{ gap:10px; }
  .review-grade{ padding:14px 0; font-size:15px; }
  .leap-setup-main{padding:28px 16px;}
  .leap-control-card{padding:18px;}
  .leap-range-stack{gap:8px;}
  .leap-range-pill{padding:10px 14px;}
  .leap-range-input{flex:1; min-width:0; font-size:16px;}
  .leap-range-line{gap:8px;}
  .leap-order-row{flex-direction:column; align-items:flex-start; gap:8px;}
  .leap-order-pills{width:100%;}
  .leap-order-pill{flex:1; justify-content:center;}
  .leap-actions{flex-direction:column; align-items:stretch; gap:12px;}
  .leap-session-footer{flex-direction:column; align-items:stretch; gap:12px; padding:18px 20px calc(18px + env(safe-area-inset-bottom, 0px));}
  .leap-session-actions{width:100%; flex-direction:row; justify-content:space-between; gap:10px;}
  .leap-session-actions .btn{flex:1; min-width:0;}
  .leap-session-stats{width:100%; justify-content:space-between;}
  .leap-card__phrase{font-size:26px;}
  .leap-preview-panel{padding:18px; min-height:260px;}
  .leap-preview-body{padding-right:2px; gap:8px;}
  .leap-preview-filters{width:100%; justify-content:space-between; gap:6px;}
  .leap-preview-filter{flex:1; padding:6px 10px; font-size:12px;}
  .leap-chunk-controls{flex-direction:row; align-items:center; gap:6px; padding:8px 12px; box-sizing:border-box;}
  .leap-chunk-controls--footer{margin-top:20px;}
  .leap-chunk-nav{width:30px; height:30px;}
  .leap-chunk-track{flex:1 1 auto; width:auto;}
  .leap-chunk-active{text-align:right;}
  .leap-preview-list{gap:6px;}
  .leap-preview-card{padding:10px 12px; border-radius:10px; gap:6px;}
  .leap-preview-card__meta{gap:6px;}
  .leap-preview-check{width:18px; height:18px; font-size:11px;}
  .leap-preview-card__phrase-row{flex-direction:column; align-items:flex-start; gap:4px;}
  .leap-preview-card__phrase{font-size:15px;}
  .leap-preview-card__meaning{font-size:13px;}
  .leap-preview-card__details{gap:3px;}
  .leap-preview-card__example{font-size:11px;}
  .leap-preview-card__source{font-size:10px;}
  .leap-finished-actions{flex-direction:column; width:100%;}
  .leap-finished-actions .btn{width:100%; min-width:0;}
}
/* Calendar Add Event revision */
.calendar-add-screen{position:fixed;inset:0;background:#000;color:#f5f5f5;display:flex;flex-direction:column;min-height:100dvh;height:100dvh;padding-top:calc(env(safe-area-inset-top,0px) + 16px);padding-bottom:calc(16px + env(safe-area-inset-bottom,0px));overflow:hidden;box-sizing:border-box;}
.calendar-add-header{position:sticky;top:calc(env(safe-area-inset-top,0px));display:flex;align-items:center;justify-content:space-between;padding:0 clamp(20px,6vw,36px);margin-bottom:18px;background:transparent;z-index:20;}
.calendar-add-header__title{font-size:20px;font-weight:600;letter-spacing:-0.01em;color:#fff;margin:0;}
.calendar-add-header__link{border:none;background:none;font-size:16px;font-weight:600;letter-spacing:-0.01em;color:#fff;cursor:pointer;}
.calendar-add-header__link.is-cancel{color:#ea2831;}
.calendar-add-header__link.is-primary{color:#ea2831;}
.calendar-add-header__link[disabled]{opacity:.35;cursor:not-allowed;}
.calendar-add-tabs{display:flex;gap:8px;padding:6px;border-radius:16px;background:#1d1d1f;border:1px solid rgba(255,255,255,.08);width:calc(100% - clamp(40px,12vw,96px));margin:0 auto 12px auto;}
.calendar-add-tab{flex:1;border:none;border-radius:12px;padding:10px 14px;font-size:14px;font-weight:600;color:#8e8e93;background:transparent;white-space:nowrap;cursor:pointer;}
.calendar-add-tab.is-active{background:#2c2c2e;color:#fff;box-shadow:0 12px 30px rgba(0,0,0,.45);}
.calendar-add-body{flex:1;min-height:0;overflow:hidden;padding:0 clamp(14px,5vw,32px) calc(80px + env(safe-area-inset-bottom, 0px));display:flex;flex-direction:column;gap:18px;}
.calendar-add-card{background:#1c1c1e;border-radius:18px;border:1px solid rgba(255,255,255,.06);box-shadow:0 18px 44px rgba(0,0,0,.55);}
.calendar-add-card--input{display:flex;flex-direction:column;overflow:hidden;}
.calendar-add-input,.calendar-add-textarea{border:none;background:transparent;color:#f5f5f5;padding:18px 20px;font-size:16px;width:100%;}
.calendar-add-input{border-bottom:1px solid rgba(255,255,255,.08);}
.calendar-add-textarea{resize:none;min-height:100px;}
.calendar-add-card--schedule{padding:12px 12px 6px;gap:6px;overflow:hidden;display:flex;flex-direction:column;}
.calendar-schedule-row{display:flex;align-items:center;gap:24px;padding:14px 20px;border-radius:18px;background:rgba(255,255,255,.02);transition:background .2s ease;flex-wrap:nowrap;}
.calendar-schedule-row:last-child{border-bottom:none;}
.calendar-schedule-row__label{flex:0 0 auto;font-size:15px;font-weight:600;color:#fff;min-width:52px;}
.calendar-schedule-row__buttons{flex:1 1 auto;display:flex;justify-content:flex-end;align-items:center;gap:24px;min-width:0;margin-left:auto;padding:0 4px;}
.calendar-schedule-button{background:rgba(255,255,255,.06);border:none;color:#fff;font-size:16px;font-weight:600;letter-spacing:-0.01em;cursor:pointer;text-align:right;padding:8px 12px;border-radius:12px;transition:color .2s ease,background .2s ease;font-variant-numeric:tabular-nums;white-space:nowrap;}
.calendar-schedule-button:hover{color:#f87171;background:rgba(255,255,255,.1);}
.calendar-schedule-button.is-active{color:#ea2831;background:rgba(234,40,49,.2);}
.calendar-schedule-row.has-error .calendar-schedule-button{color:#fca5a5;}
.calendar-add-error{margin:0 18px 6px;padding:10px 14px;border-radius:14px;border:1px solid rgba(234,40,49,.45);background:rgba(120,16,24,.25);color:#fca5a5;font-size:13px;}
.calendar-add-card--schedule .calendar-add-error{margin-top:0;}
.calendar-schedule-row.is-active{background:transparent;}
.calendar-schedule-row.has-error{background:transparent;}
.calendar-drumroll{position:relative;padding:18px 18px 14px;border-radius:18px;background:#1c1c1e;border:1px solid rgba(255,255,255,.08);box-shadow:0 12px 36px rgba(0,0,0,.45);display:flex;flex-direction:column;gap:18px;}
.calendar-drumroll__section{display:flex;flex-direction:column;gap:12px;}
.calendar-drumroll__fields{display:flex;align-items:flex-end;gap:12px;justify-content:center;}
.calendar-drumroll__section--time .calendar-drumroll__fields{align-items:center;}
.calendar-drumroll__field{display:flex;flex-direction:column;align-items:center;gap:0;}
.calendar-drumroll__picker{position:relative;width:88px;flex:0 0 auto;--scroll-picker-item-height:40px;--scroll-picker-viewport-height:calc(var(--scroll-picker-item-height)*5);}
.calendar-drumroll__gradient{position:absolute;left:0;right:0;height:calc(var(--scroll-picker-item-height)*1.6);pointer-events:none;z-index:3;border-radius:14px;}
.calendar-drumroll__gradient--top{top:0;background:linear-gradient(180deg,rgba(28,28,30,.9) 0%,rgba(28,28,30,0) 100%);}
.calendar-drumroll__gradient--bottom{bottom:0;background:linear-gradient(0deg,rgba(28,28,30,.9) 0%,rgba(28,28,30,0) 100%);}
.calendar-drumroll__selection{position:absolute;left:8px;right:8px;top:50%;height:var(--scroll-picker-item-height);margin-top:calc(var(--scroll-picker-item-height)/-2);border-radius:16px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04);box-shadow:0 2px 8px rgba(0,0,0,.15) inset,0 0 0 1px rgba(0,0,0,.35);pointer-events:none;z-index:2;}
.calendar-drumroll__viewport{position:relative;height:var(--scroll-picker-viewport-height);overflow:hidden;padding:0;margin:0;display:flex;flex-direction:column;align-items:stretch;touch-action:none;user-select:none;cursor:grab;-webkit-tap-highlight-color:transparent;}
.calendar-drumroll__viewport:active{cursor:grabbing;}
.calendar-drumroll__track{display:flex;flex-direction:column;will-change:transform;}
.calendar-drumroll__item{height:var(--scroll-picker-item-height);margin:0 6px;border:none;border-radius:16px;background:transparent;color:#8e8e93;font-size:24px;font-weight:500;display:flex;align-items:center;justify-content:center;transition:color .18s ease,transform .18s ease;font-variant-numeric:tabular-nums;}
.calendar-drumroll__item.is-active{color:#fff;font-weight:700;transform:scale(1.08);text-shadow:0 0 10px rgba(0,0,0,.45);}
.calendar-drumroll__item.is-disabled{opacity:.35;}
.calendar-drumroll__separator{font-size:20px;font-weight:600;color:#fff;padding:0 6px 10px;}
@media (max-width:540px){
  .calendar-drumroll__picker{width:72px;}
  .calendar-drumroll__item{font-size:20px;}
}
.scroll-picker-dialog__overlay{position:fixed;inset:0;background:rgba(0,0,0,.64);display:flex;align-items:flex-end;justify-content:center;padding:24px 16px calc(16px + env(safe-area-inset-bottom,0px));z-index:2200;}
.scroll-picker-dialog{width:min(520px,100%);background:#1c1c1e;border-radius:24px 24px 0 0;border:1px solid rgba(255,255,255,.08);box-shadow:0 -4px 32px rgba(0,0,0,.4);display:flex;flex-direction:column;overflow:hidden;}
.scroll-picker-dialog--sheet .scroll-picker-dialog{width:min(520px,100%);}
.scroll-picker-dialog__header{padding:20px 24px 12px;}
.scroll-picker-dialog__title{margin:0;font-size:18px;font-weight:600;color:#fff;}
.scroll-picker-dialog__body{padding:0 24px 8px;background:transparent;}
.scroll-picker-dialog__footer{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px 20px;background:rgba(255,255,255,.02);border-top:1px solid rgba(255,255,255,.06);}
.scroll-picker-dialog__button{min-width:96px;padding:10px 18px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04);color:#fff;font-weight:600;font-size:14px;cursor:pointer;transition:background .2s ease,border .2s ease,transform .15s ease;}
.scroll-picker-dialog__button:active{transform:scale(.97);}
.scroll-picker-dialog__button--confirm{background:#2563eb;border-color:#2563eb;}
.scroll-picker-dialog__button--confirm:hover{background:#2b6dea;}
.scroll-picker-dialog__button--cancel:hover{background:rgba(255,255,255,.08);}
@media (max-width:540px){
  .calendar-schedule-row__buttons{gap:14px;padding:0 8px;}
  .scroll-picker-dialog__overlay{padding:12px 12px calc(12px + env(safe-area-inset-bottom,0px));}
  .scroll-picker-dialog{width:100%;}
}
.calendar-template-list{display:flex;flex-direction:column;gap:12px;max-height:calc(100vh - 300px);overflow-y:auto;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none;padding-bottom:24px;}
.calendar-template-list::-webkit-scrollbar{width:0;height:0;}
.calendar-template-card{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:18px 20px;border-radius:16px;background:#1c1c1e;border:1px solid rgba(255,255,255,.08);color:#fff;text-align:left;cursor:pointer;}
.calendar-template-card__text{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px;}
.calendar-template-card__title{font-weight:600;font-size:16px;word-break:break-word;}
.calendar-template-card__summary{font-size:13px;color:#a1a1aa;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.calendar-template-list__add{margin-top:12px;border-radius:14px;border:1px dashed #ea2831;color:#ea2831;background:rgba(58,15,18,.4);padding:14px 18px;display:flex;align-items:center;gap:10px;justify-content:center;font-weight:600;}
.calendar-template-detail{display:flex;flex-direction:column;gap:12px;padding:16px 20px calc(80px + env(safe-area-inset-bottom, 0px));background:#1c1c1e;border-radius:18px;border:1px solid rgba(255,255,255,.08);max-height:calc(100vh - 160px - env(safe-area-inset-top, 0px) - env(safe-area-inset-bottom, 0px));position:relative;overflow:visible;}
.calendar-template-detail__back-wrapper{display:flex;align-items:center;gap:8px;margin-bottom:12px;flex-shrink:0;}
.calendar-template-detail__back{display:inline-flex;align-items:center;justify-content:center;border:none;background:none;color:#94a3b8;cursor:pointer;padding:4px;transition:opacity .2s ease;}
.calendar-template-detail__back:hover{opacity:.7;color:#cbd5e1;}
.calendar-template-detail__back-text{display:inline-flex;align-items:center;border:none;background:none;color:#94a3b8;font-weight:600;cursor:pointer;padding:4px 0;transition:opacity .2s ease, color .2s ease;}
.calendar-template-detail__back-text:hover{opacity:.7;color:#cbd5e1;}
.calendar-template-detail__header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 16px;background:rgba(255,255,255,.02);border-radius:12px;border:1px solid rgba(255,255,255,.06);margin-bottom:12px;flex-wrap:wrap;flex-shrink:0;}
.calendar-template-detail__title-label{font-size:12px;color:#94a3b8;font-weight:600;letter-spacing:0.05em;margin-bottom:4px;}
.calendar-template-detail__title{margin:0;font-size:18px;font-weight:600;flex:1;min-width:0;}
.calendar-template-detail__scrollable{flex:1;overflow-y:auto;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none;min-height:0;}
.calendar-template-detail__scrollable::-webkit-scrollbar{width:0;height:0;}
.calendar-template-detail__activities{display:flex;flex-direction:column;gap:10px;}
.calendar-template-activity{display:flex;align-items:flex-start;gap:12px;padding:14px 16px;border-radius:14px;background:#2c2c2e;color:#fff;}
.calendar-template-activity.is-disabled{opacity:.45;}
.calendar-template-activity__time{font-variant-numeric:tabular-nums;min-width:54px;font-size:15px;font-weight:600;}
.calendar-template-activity__label{flex:1;font-size:15px;}
.calendar-template-activity__edit{border:none;background:none;color:#94a3b8;cursor:pointer;padding:4px;display:flex;align-items:center;justify-content:center;transition:color .2s ease;}
.calendar-template-activity__edit:hover{color:#ea2831;}
.calendar-template-activity__toggle{border:none;background:none;color:#ea2831;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;transition:background .2s ease;}
.calendar-template-activity__toggle:hover{background:rgba(234,40,49,.1);}
.calendar-template-activity__time-inputs{display:flex;flex-direction:column;gap:6px;min-width:80px;flex-shrink:0;}
.calendar-template-activity__time-button{background:rgba(255,255,255,.06);border:none;color:#fff;font-size:16px;font-weight:600;letter-spacing:-0.01em;cursor:pointer;text-align:center;padding:8px 12px;border-radius:12px;transition:color .2s ease,background .2s ease;font-variant-numeric:tabular-nums;white-space:nowrap;min-width:80px;display:flex;align-items:center;justify-content:center;}
.calendar-template-activity__time-button:hover{color:#f87171;background:rgba(255,255,255,.1);}
.calendar-template-activity__time-button:focus{outline:none;}
.calendar-template-activity__time-input{background:rgba(10,15,28,.88);border:1px solid rgba(71,85,105,.6);border-radius:12px;padding:8px 10px;font-size:14px;color:#f8fafc;font-variant-numeric:tabular-nums;width:100%;box-sizing:border-box;}
.calendar-template-activity__time-input:focus{outline:none;border-color:#ea2831;box-shadow:0 0 0 2px rgba(234,40,49,.2);}
.calendar-template-activity__label-wrapper{flex:1;min-width:0;display:flex;flex-direction:column;gap:6px;}
.calendar-template-activity__label-title{font-size:12px;color:#94a3b8;font-weight:600;letter-spacing:0.05em;}
.calendar-template-activity__label-input{width:100%;background:rgba(10,15,28,.88);border:1px solid rgba(71,85,105,.6);border-radius:12px;padding:8px 12px;font-size:15px;color:#f8fafc;box-sizing:border-box;font-family:inherit;resize:vertical;}
.calendar-template-activity__label-input:focus{outline:none;border-color:#ea2831;box-shadow:0 0 0 2px rgba(234,40,49,.2);}
.calendar-template-activity__color-wrapper{flex:1;min-width:0;display:flex;flex-direction:column;gap:6px;}
.calendar-template-activity__input,.calendar-template-activity__textarea{border:none;background:transparent;color:#f5f5f5;padding:18px 20px;font-size:16px;width:100%;box-sizing:border-box;font-family:inherit;}
.calendar-template-activity__input{border-bottom:1px solid rgba(255,255,255,.08);}
.calendar-template-activity__textarea{resize:none;min-height:80px;}
.calendar-template-activity__delete{border:none;background:none;color:#f87171;font-size:20px;cursor:pointer;padding:4px 8px;line-height:1;transition:color .2s ease;}
.calendar-template-activity__delete:hover{color:#ef4444;}
.calendar-template-detail__add-activity{display:inline-flex;align-items:center;gap:8px;background:none;border:none;color:#ea2831;cursor:pointer;font-weight:600;letter-spacing:0.06em;padding:12px 0;margin-top:8px;}
.calendar-template-detail__title-input{background:rgba(10,15,28,.88);border:1px solid rgba(71,85,105,.6);border-radius:12px;padding:8px 12px;font-size:18px;font-weight:600;color:#f8fafc;width:100%;box-sizing:border-box;}
.calendar-template-detail__title-input:focus{outline:none;border-color:#ea2831;box-shadow:0 0 0 2px rgba(234,40,49,.2);}
.calendar-template-detail__cancel-button{margin-top:8px;border:1px solid #ea2831;border-radius:16px;background:transparent;color:#ea2831;font-weight:600;padding:14px;font-size:16px;cursor:pointer;transition:border-color .2s ease, color .2s ease, transform .2s ease, background .2s ease;}
.calendar-template-detail__cancel-button:hover{border-color:#ea2831;background:rgba(234,40,49,.1);color:#ea2831;}
.calendar-template-detail__cancel-button:active{transform:scale(.97);}
.calendar-template-detail__cta{margin-top:12px;border:none;border-radius:16px;background:#ea2831;color:#fff;font-weight:600;padding:14px;font-size:16px;cursor:pointer;transition:background .2s ease, transform .2s ease;flex-shrink:0;}
.calendar-template-detail__cta:active{transform:scale(.97);}
.calendar-template-detail__cta[disabled]{opacity:.45;cursor:not-allowed;}
.calendar-template-detail__cta--fixed{position:fixed;left:50%;transform:translateX(-50%);bottom:0;width:min(100%,calc(100vw - 40px));max-width:520px;margin:0 clamp(14px,5vw,32px) calc(80px + env(safe-area-inset-bottom, 0px));z-index:100;}
.calendar-template-detail__edit-button{display:inline-flex;align-items:center;justify-content:center;border:none;background:rgba(148,163,184,.12);border-radius:12px;padding:8px;color:#a1a1aa;cursor:pointer;transition:background .2s ease, transform .2s ease, color .2s ease;width:36px;height:36px;flex-shrink:0;}
.calendar-template-detail__edit-button:hover{background:rgba(148,163,184,.18);color:#cbd5e1;}
.calendar-template-detail__edit-button:active{transform:scale(.97);}
.calendar-template-detail__delete-button{display:inline-flex;align-items:center;justify-content:center;border:none;background:rgba(148,163,184,.12);border-radius:12px;padding:8px;color:#a1a1aa;cursor:pointer;transition:background .2s ease, transform .2s ease, color .2s ease;width:36px;height:36px;}
.calendar-template-detail__delete-button:hover{background:rgba(148,163,184,.18);color:#cbd5e1;}
.calendar-template-detail__delete-button:active{transform:scale(.97);}
